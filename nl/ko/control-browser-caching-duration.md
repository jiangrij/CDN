---

copyright:
  years: 2017, 2018
lastupdated: "2018-08-30"

---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}
{:codeblock: .codeblock}
{:pre: .pre}
{:screen: .screen}
{:tip: .tip}
{:download: .download}

# 브라우저 캐싱 기간을 제어하기 위해 캐시 제어 `max-age` 사용

CDN을 사용 중인 경우 캐싱을 수행할 수 있는 각 위치에 대해 한 가지 유형의 캐싱이 있습니다.
  * **브라우저 레벨 캐싱** 브라우저에서 특정 기간 동안 컨텐츠의 일부를 캐싱하는 경우 수행합니다.
  * **에지 레벨 캐싱** CDN 에지 서버에서 특정 기간 동안(단, 동일한 기간일 필요는 없음) 컨텐츠의 일부를 캐싱하는 경우 수행합니다.

브라우저 레벨에서 얼마나 오래 컨텐츠를 캐싱하는지 제어하는 몇 가지 방법이 있습니다. 사용할 방법은 다음 요소에 따라 달라집니다.
  * “헤더 준수: 설정”으로 [CDN의 구성 세부사항을 업데이트](https://console.bluemix.net/docs/infrastructure/CDN/how-to.html#updating-cdn-configuration-details)했거나 업데이트 예정인지 여부.
  * 원본 서버가 지정된 컨텐츠의 일부에 대한 Cache-Control 헤더에 `max-age` 값을 제공하는지 여부. 

이러한 요소가 어떻게 변경되는지에 상관없이, 원본 서버는 대상 컨텐츠에 대해 비어 있지 않은 Cache-Control 헤더를 제공해야 합니다. 원본에서 에지 서버에 대해 비어 있지 않은 Cache-Control 헤더를 제공하지 않는 경우 에지 서버는 고유 Cache-Control 헤더를 브라우저에 제공하지 않습니다.

에지 서버가 Cache-Control 헤더를 브라우저에 보내면 이 Cache-Control 헤더에 대한 `max-age` 값은 에지 서버의 컨텐츠가 시간이 경과된(stale) 상태가 되어 원본에서 유효성 검증을 다시 수행해야 하기 전까지 남아 있는 시간에 해당합니다. 

## 헤더 준수: 해제
헤더 준수가 **해제**로 설정되어 있는 경우 CDN의 TTL 설정을 구성하여 브라우저 레벨 캐시 시간을 제어할 수 있습니다. 각 파일 또는 파일 디렉토리의 경우, 해당 경로 및 원하는 캐시 기간에 대해 TTL 규칙을 작성해야 합니다.

이 설정은 두 가지 작업을 수행합니다.
  * TTL 규칙은 지정된 시간 동안 컨텐츠를 캐싱하도록 에지 서버에 알립니다.
  * 컨텐츠가 에지 서버에서 제공되는 경우 에지 서버는 TTL 기간을 기반으로 고유 Cache-Control 헤더를 `max-age` 값과 함께 브라우저에 전송합니다.

## 헤더 준수: 설정
**헤더 준수**가 **설정**으로 지정되어 있는 경우 컨텐츠에 대한 브라우저 레벨 캐싱 시간을 제어하기 위해 TTL 규칙을 구성하지 않도록 선택할 수 있습니다. 이러한 경우 지정된 컨텐츠 일부에 대해 `max-age` 값과 함께 Cache-Control 헤더를 제공하도록 원본 서버를 구성해야 합니다. 헤더 준수가 설정되어 있으므로 에지 서버는 원본 서버의 Cache-Control에 포함된 `max-age` 값을 지정된 컨텐츠에 대한 TTL 기간으로 사용합니다. 컨텐츠에 적용되는 CDN에 대한 TTL 규칙 항목이 이미 있는 경우 에지 서버는 실제로 `max-age` 값을 계속 사용하고 해당 컨텐츠에 대한 에지 레벨 캐싱 기간을 겹쳐씁니다.

이 설정은 두 가지 작업을 수행합니다.
  * 원본의 Cache-Control `max-age` 지시문 값은 지정된 시간 동안 컨텐츠를 캐싱하도록 에지 서버에 알립니다.
  * 컨텐츠가 에지 서버에서 제공되는 경우 에지 서버는 원본 서버의 `max-age` 값을 기반으로 고유 Cache-Control 헤더를 `max-age` 값과 함께 브라우저에 전송합니다.

예제에 표시된 대상 메소드를 사용하는 경우 해당 TTL 규칙이 적용되는 다른 컨텐츠는 영향을 받지 않습니다.

**헤더 준수**가 **설정**으로 지정되어 있는 경우 원본 서버가 Cache-Control 헤더에 있는 `max-age` 지시문을 전송하지 않으면 TTL 규칙에 의해 브라우저의 캐싱 기간을 제어할 수 있습니다. `max-age`를 지정하는 경우에는 해당 값이 실수로 TTL 규칙의 시간 값을 대체할 수 있습니다.

## 요약

|헤더 준수|원본에서 Cache-Control 제공|에지 서버에서 특정 컨텐츠의 캐싱 기간|에지 서버에서 Cache-Control 제공|
|---|---|---|---|
|설정|예, `max-age`를 지정함|원본의 `max-age` 값을 겹쳐씀|예, `max-age`는 에지의 컨텐츠가 원본에서 유효성 검증을 다시 수행하기 전까지 남은 시간입니다.|
|설정|예, `max-age`를 지정하지 않음|CDN의 TTL 구성을 기반으로 함|예, `max-age`는 에지의 컨텐츠가 원본에서 유효성 검증을 다시 수행하기 전까지 남은 시간입니다.|
|설정|아니오|CDN의 TTL 구성을 기반으로 함|아니오|
|해제|예, `max-age`를 지정함|CDN의 TTL 구성을 기반으로 함|예, `max-age`는 에지의 컨텐츠가 원본에서 유효성 검증을 다시 수행하기 전까지 남은 시간입니다.|
|해제|예, `max-age`를 지정하지 않음|CDN의 TTL 구성을 기반으로 함|예, `max-age`는 에지의 컨텐츠가 원본에서 유효성 검증을 다시 수행하기 전까지 남은 시간입니다.|
|해제|아니오|CDN의 TTL 구성을 기반으로 함|아니오|

## 자세한 정보
* [CDN 관리](https://console.bluemix.net/docs/infrastructure/CDN/how-to.html) 방법
* [RFC 2616](https://www.ietf.org/rfc/rfc2616.txt)의 섹션 14.9에 정의된 대로 Cache-Control
